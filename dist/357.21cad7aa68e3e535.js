"use strict";(self.webpackChunkBulona_angular=self.webpackChunkBulona_angular||[]).push([[357],{4357:(Qe,b,u)=>{u.r(b),u.d(b,{DashboardModule:()=>ze});var d=u(9808),C=u(1409),l=u(8432),e=u(5e3);let y=(()=>{class o{constructor(t){this.router=t}ngOnInit(){$.getScript("./assets/js/deafult-dashboard.js"),this.userName=localStorage.getItem("nombre")||"Guest"}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-default"]],decls:28,vars:1,consts:[[1,"welcome-container"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"steps-title"],[1,"steps-list"],[1,"step-item"],[1,"step-link"],[1,"bi","bi-list"],[1,"bi","bi-house-door-fill"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"p",2),e._uU(4,"Sistema de Monitoreo para la replicabilidad de datos basado en IoT para los Cultivos de Caf\xe9 en el Municipio de Taminango"),e.qZA(),e.TgZ(5,"h2",3),e._uU(6,"Primeros Pasos"),e.qZA(),e.TgZ(7,"div",4)(8,"div",5)(9,"h3"),e._uU(10,"1. Crear una Finca"),e.qZA(),e.TgZ(11,"p"),e._uU(12,"Comienza creando una finca para gestionar tus cultivos. Proporci\xf3nanos la informaci\xf3n b\xe1sica sobre la finca. "),e.qZA(),e.TgZ(13,"p"),e._uU(14,"Esto lo puedes hacer desde el menu a la izquierda, dentro del mismo encontraras opci\xf3n de finca"),e.qZA(),e.TgZ(15,"a",6),e._uU(16," Haz click en "),e.TgZ(17,"i",7),e._uU(18," Menu"),e.qZA(),e._uU(19," para abrir el men\xfa "),e.qZA()(),e.TgZ(20,"div",5)(21,"h3"),e._uU(22,"2. A\xf1adir un Cultivo de Caf\xe9"),e.qZA(),e.TgZ(23,"p"),e._uU(24,"Despu\xe9s de crear la finca "),e._UZ(25,"i",8),e._uU(26,", a\xf1ade un cultivo de caf\xe9 para empezar a monitorear sus datos."),e.qZA(),e._UZ(27,"a",6),e.qZA()()()),2&t&&(e.xp6(2),e.hij(" ",n.userName,", nos alegra que estes de vuelta"))},styles:[".welcome-container[_ngcontent-%COMP%]{padding:2rem;text-align:center;background-color:#fffdd0;border-radius:10px;box-shadow:0 4px 8px #0000001a}.welcome-container[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{font-size:2rem;color:#6f4e37;margin-bottom:1rem;font-weight:700}.welcome-container[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;color:#5a3e2e;margin-bottom:2rem}.welcome-container[_ngcontent-%COMP%]   .steps-title[_ngcontent-%COMP%]{font-size:1.75rem;color:#6f4e37;margin-bottom:1.5rem;font-weight:600}.welcome-container[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.welcome-container[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]{background-color:tan;padding:1.5rem;border-radius:8px;text-align:left;box-shadow:0 3px 6px #0000001a}.welcome-container[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:#6f4e37;margin-bottom:.5rem;font-weight:600}.welcome-container[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#5a3e2e;margin-bottom:1rem}.welcome-container[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-link[_ngcontent-%COMP%]{font-size:1rem;color:#6f4e37;text-decoration:none;display:inline-block;margin-top:.5rem;transition:color .3s ease}.welcome-container[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.welcome-container[_ngcontent-%COMP%]   .steps-list[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   .step-link[_ngcontent-%COMP%]:hover{color:#5a3e2e}@media (max-width: 768px){.welcome-container[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{font-size:1.75rem}.welcome-container[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{font-size:1.1rem}.welcome-container[_ngcontent-%COMP%]   .steps-title[_ngcontent-%COMP%]{font-size:1.5rem}.welcome-container[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}.welcome-container[_ngcontent-%COMP%]   .step-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .welcome-container[_ngcontent-%COMP%]   .step-link[_ngcontent-%COMP%]{font-size:.95rem}}"]}),o})();var q=u(3470),s=u(6518),m=u(520),c=u(2382);let U=(()=>{class o{constructor(t){this.http=t,this.Highcharts=q,this.allData=[]}ngOnInit(){this.fetchSensorData()}fetchSensorData(){this.http.get(`${s.N.apiUrl}/lectura-sensor`).subscribe(t=>{this.allData=t,this.filterAndCreateCharts()},t=>{console.error("Error fetching sensor data",t)})}filterAndCreateCharts(){let t=this.allData;if(this.startDate){const g=new Date(this.startDate).getTime();t=t.filter(_=>new Date(_.fecha_hora).getTime()>=g)}if(this.endDate){const g=new Date(this.endDate).getTime();t=t.filter(_=>new Date(_.fecha_hora).getTime()<=g)}const n=[],r=[],a=[];t.forEach(g=>{const _=new Date(g.fecha_hora).getTime();1===g.id_sensor?"\xbaC"===g.unidad_medida?n.push([_,g.valor]):"%"===g.unidad_medida&&r.push([_,g.valor]):2===g.id_sensor&&a.push([_,g.valor])}),this.createTemperatureChart(n),this.createHumidityChart(r),this.createSoilHumidityChart(a),console.log("N\xfamero de datos de temperatura:",n.length),console.log("N\xfamero de datos de humedad ambiente:",r.length),console.log("N\xfamero de datos de humedad del suelo:",a.length)}createTemperatureChart(t){this.temperatureChartOptions={chart:{type:"spline"},title:{text:'Temperatura <i class="bi bi-thermometer-sun"></i>',useHTML:!0},xAxis:{type:"datetime"},yAxis:{title:{text:"Temperatura (\xbaC)"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.2f} \xbaC"},series:[{name:"Temperatura",data:t,type:"spline"}]}}createHumidityChart(t){this.humidityChartOptions={chart:{type:"spline"},title:{text:'Humedad Ambiente <i class="bi bi-droplet-half"></i>',useHTML:!0},xAxis:{type:"datetime"},yAxis:{title:{text:"Humedad (%)"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.2f} %"},series:[{name:"Humedad",data:t,type:"spline"}]}}createSoilHumidityChart(t){this.soilHumidityChartOptions={chart:{type:"spline"},title:{text:'Humedad del Suelo <i class="bi bi-moisture"></i>',useHTML:!0},xAxis:{type:"datetime"},yAxis:{title:{text:"Humedad del Suelo (%)"}},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%e. %b}: {point.y:.2f} %"},series:[{name:"Humedad del Suelo",data:t,type:"spline"}]}}onDateChange(){this.filterAndCreateCharts()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.eN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-analytics"]],decls:20,vars:8,consts:[[1,"analytics-container"],[1,"bi","bi-graph-up"],[1,"date-filter"],[1,"date-input"],["for","start-date"],["type","date","id","start-date",3,"ngModel","ngModelChange","change"],["for","end-date"],["type","date","id","end-date",3,"ngModel","ngModelChange","change"],[1,"chart-container"],[1,"chart-wrapper"],[2,"width","100%","height","400px","display","block",3,"Highcharts","options"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Datos de los Sensores "),e._UZ(3,"i",1),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"label",4),e._uU(7,"Fecha de inicio:"),e.qZA(),e.TgZ(8,"input",5),e.NdJ("ngModelChange",function(a){return n.startDate=a})("change",function(){return n.onDateChange()}),e.qZA()(),e.TgZ(9,"div",3)(10,"label",6),e._uU(11,"Fecha de fin:"),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(a){return n.endDate=a})("change",function(){return n.onDateChange()}),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9),e._UZ(15,"highcharts-chart",10),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"highcharts-chart",10),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"highcharts-chart",10),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("ngModel",n.startDate),e.xp6(4),e.Q6J("ngModel",n.endDate),e.xp6(3),e.Q6J("Highcharts",n.Highcharts)("options",n.temperatureChartOptions),e.xp6(2),e.Q6J("Highcharts",n.Highcharts)("options",n.humidityChartOptions),e.xp6(2),e.Q6J("Highcharts",n.Highcharts)("options",n.soilHumidityChartOptions))},directives:[c.Fj,c.JJ,c.On,C.x],styles:[".analytics-container[_ngcontent-%COMP%]{padding:2rem;background-color:#ffffffe6;border-radius:10px;box-shadow:0 10px 20px #0000001a}.analytics-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#6f4e37;font-size:1.75rem;font-weight:700;text-align:center;margin-bottom:1.5rem}.analytics-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem;font-size:1.5rem;color:#5a3e2e}.analytics-container[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:2rem}.analytics-container[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;font-size:1rem}.analytics-container[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#6f4e37;font-weight:600;margin-bottom:.5rem}.analytics-container[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-input[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{border:1px solid #D2B48C;padding:.5rem;border-radius:5px;font-size:1rem;background-color:#fffdd0;color:#6f4e37}.analytics-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem}.analytics-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%}@media (min-width: 768px){.analytics-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]{flex:1 1 calc(50% - 2rem)}}@media (min-width: 992px){.analytics-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]{flex:1 1 calc(33% - 2rem)}}.analytics-container[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]   .chart-wrapper[_ngcontent-%COMP%]   highcharts-chart[_ngcontent-%COMP%]{box-shadow:0 5px 15px #0000000d;border-radius:10px;background-color:#fff;padding:1rem}@media (max-width: 576px){.analytics-container[_ngcontent-%COMP%]{padding:1rem}.analytics-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.analytics-container[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}"]}),o})();var F=u(262),x=u(2843);let f=(()=>{class o{constructor(t){this.http=t}obtenercultivo(){let t=[s.N.apiUrl,"cultivo"].join("/");return this.http.get(t)}obtenercultivoId(t){let n=[s.N.apiUrl,"cultivo",t].join("/");return this.http.get(n)}agregarcultivo(t){let n=[s.N.apiUrl,"cultivo"].join("/");return this.http.post(n,t)}editarcultivo(t,n){let r=[s.N.apiUrl,"cultivo",n].join("/");return this.http.put(r,t)}eliminarRegistrocultivo(t){let n=[s.N.apiUrl,"cultivo",t].join("/");return this.http.delete(n)}obtenerCultivosByUserID(){const t=localStorage.getItem("id");if(!t)throw new Error("No se ha iniciado sesi\xf3n");return this.http.get(`${s.N.apiUrl}/cultivo/usuario/${t}`).pipe((0,F.K)(r=>(console.error("Error al obtener los cultivos:",r),(0,x._)("Ocurri\xf3 un error al obtener los cultivos."))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function k(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleModoEdicion()}),e._uU(1," Editar "),e._UZ(2,"i",17),e.qZA()}}function I(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleModoEdicion()}),e._UZ(1,"i",19),e._uU(2," Salir Modo Edici\xf3n "),e.qZA()}}function J(o,i){1&o&&(e.TgZ(0,"th",10),e._UZ(1,"i",20),e.qZA())}const v=function(o){return["/dashboard/actualizar-cultivo",o]},M=function(o){return["/dashboard/borrar-cultivo",o]};function S(o,i){if(1&o&&(e.TgZ(0,"td")(1,"a",22),e._UZ(2,"i",23),e._uU(3," Editar "),e.qZA(),e.TgZ(4,"a",24),e._UZ(5,"i",25),e._uU(6," Eliminar "),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(2,v,t.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(4,M,t.id))}}function N(o,i){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.YNc(13,S,7,6,"td",21),e.qZA()),2&o){const t=i.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.fecha_siembra),e.xp6(2),e.Oqu(t.fecha_cosecha_estimada),e.xp6(2),e.Oqu(t.id_finca),e.xp6(2),e.Oqu(t.estado_cultivo),e.xp6(2),e.hij("",t.area_cultivo," m\xb2"),e.xp6(1),e.Q6J("ngIf",n.modoEdicion)}}function w(o,i){if(1&o&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"h5",29),e._uU(4),e.qZA(),e.TgZ(5,"p",30)(6,"strong"),e._uU(7,"Fecha siembra:"),e.qZA(),e._uU(8),e._UZ(9,"br"),e.TgZ(10,"strong"),e._uU(11,"Fecha cosecha estimada:"),e.qZA(),e._uU(12),e._UZ(13,"br"),e.TgZ(14,"strong"),e._uU(15,"Id finca:"),e.qZA(),e._uU(16),e._UZ(17,"br"),e.TgZ(18,"strong"),e._uU(19,"Estado cultivo:"),e.qZA(),e._uU(20),e._UZ(21,"br"),e.TgZ(22,"strong"),e._uU(23,"\xc1rea cultivo:"),e.qZA(),e._uU(24),e.qZA(),e.TgZ(25,"a",22),e._UZ(26,"i",23),e._uU(27," Editar "),e.qZA(),e.TgZ(28,"a",24),e._UZ(29,"i",25),e._uU(30," Eliminar "),e.qZA()()()()),2&o){const t=i.$implicit;e.xp6(4),e.Oqu(t.nombre),e.xp6(4),e.hij(" ",t.fecha_siembra," "),e.xp6(4),e.hij(" ",t.fecha_cosecha_estimada," "),e.xp6(4),e.hij(" ",t.id_finca," "),e.xp6(4),e.hij(" ",t.estado_cultivo," "),e.xp6(4),e.hij(" ",t.area_cultivo," m\xb2 "),e.xp6(1),e.Q6J("routerLink",e.VKq(8,v,t.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(10,M,t.id))}}let E=(()=>{class o{constructor(t,n){this.cs=t,this.router=n,this.modoEdicion=!1}ngOnInit(){const t=localStorage.getItem("rol");let n;"administrador"===t?n=this.cs.obtenercultivo():"agricultor"===t?n=this.cs.obtenerCultivosByUserID():console.error("Rol de usuario no reconocido"),n.subscribe({next:r=>{this.cultivo=r,console.log(r)},error:r=>r})}crearCultivo(){this.router.navigate(["dashboard/crear-cultivo"])}toggleModoEdicion(){this.modoEdicion=!this.modoEdicion}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f),e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cultivo"]],decls:31,vars:5,consts:[[1,"container-fluid"],[1,"row","mb-3"],[1,"col-12","col-md-6","mb-2","mb-md-0"],["type","button",1,"btn","btn-primary","w-100",3,"click"],[1,"col-12","col-md-6","text-md-end"],["title","Modo Edici\xf3n","class","btn btn-outline-danger",3,"click",4,"ngIf"],["title","Salir modo edici\xf3n","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"d-none","d-md-block"],[1,"table-responsive"],[1,"table","table-hover","table-striped-columns","table-bordered","border-primary-subtle"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-md-none"],[1,"row","row-cols-1","g-4"],["class","col",4,"ngFor","ngForOf"],["title","Modo Edici\xf3n",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-gear-wide-connected"],["title","Salir modo edici\xf3n",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-x-square-fill"],["title","Editar",1,"bi","bi-feather"],[4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"routerLink"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"routerLink"],[1,"bi","bi-trash3"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.crearCultivo()}),e._uU(4,"Crear Cultivo"),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,k,3,0,"button",5),e.YNc(7,I,3,0,"button",6),e.qZA()(),e.TgZ(8,"div",7)(9,"div",8)(10,"table",9)(11,"thead")(12,"tr")(13,"th",10),e._uU(14,"Nombre"),e.qZA(),e.TgZ(15,"th",10),e._uU(16,"Fecha siembra"),e.qZA(),e.TgZ(17,"th",10),e._uU(18,"Fecha cosecha estimada"),e.qZA(),e.TgZ(19,"th",10),e._uU(20,"Id finca"),e.qZA(),e.TgZ(21,"th",10),e._uU(22,"Estado de cultivo"),e.qZA(),e.TgZ(23,"th",10),e._uU(24,"\xc1rea del cultivo"),e.qZA(),e.YNc(25,J,2,0,"th",11),e.qZA()(),e.TgZ(26,"tbody"),e.YNc(27,N,14,7,"tr",12),e.qZA()()()(),e.TgZ(28,"div",13)(29,"div",14),e.YNc(30,w,31,12,"div",15),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngIf",!n.modoEdicion),e.xp6(1),e.Q6J("ngIf",n.modoEdicion),e.xp6(18),e.Q6J("ngIf",n.modoEdicion),e.xp6(2),e.Q6J("ngForOf",n.cultivo),e.xp6(3),e.Q6J("ngForOf",n.cultivo))},directives:[d.O5,d.sg,l.yS],styles:[".container-fluid[_ngcontent-%COMP%]{padding:1rem}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:1.5rem}.container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#6f4e37;border-color:#6f4e37;color:#fff;font-size:1rem;padding:.75rem;width:100%;transition:background-color .3s ease}.container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active{background-color:#5a3e2e;border-color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]{color:#5a3e2e;border-color:#5a3e2e;padding:.5rem 1rem;transition:background-color .3s ease}.container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:active{background-color:tan;border-color:#5a3e2e;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem}.container-fluid[_ngcontent-%COMP%]   .table.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#6f4e371a}.container-fluid[_ngcontent-%COMP%]   .table.table-bordered[_ngcontent-%COMP%]{border-color:tan}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;padding:1rem}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#6f4e37;color:#fff}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#6f4e37}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{color:#6f4e37;border-color:#6f4e37;padding:.5rem}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:active{background-color:tan;border-color:#5a3e2e;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:1px solid #D2B48C;border-radius:10px}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#fffdd0;padding:1rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#6f4e37;font-weight:700;font-size:1.25rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:1rem;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#6f4e37}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{color:#6f4e37;border-color:#6f4e37;padding:.5rem;margin-right:.5rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:active{background-color:tan;border-color:#5a3e2e;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]{color:#5a3e2e;border-color:#5a3e2e;padding:.5rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:active{background-color:tan;border-color:#5a3e2e;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}@media (max-width: 576px){.container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{font-size:.875rem}.container-fluid[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem}.container-fluid[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:.9rem}}"]}),o})(),p=(()=>{class o{constructor(t){this.http=t}obtenerFinca(){let t=[s.N.apiUrl,"finca"].join("/");return this.http.get(t)}obtenerFincaId({id:t}){let n=[s.N.apiUrl,"finca",t].join("/");return this.http.get(n)}agregarFinca(t){let n=[s.N.apiUrl,"finca"].join("/");return this.http.post(n,t)}editarFinca(t,n){let r=[s.N.apiUrl,"finca",n].join("/");return this.http.put(r,t)}eliminarRegistroFinca(t){let n=[s.N.apiUrl,"finca",t].join("/");return this.http.delete(n)}obtenerFincaIdUsuario(){const t=localStorage.getItem("id");if(!t)throw new Error("ID de usuario no encontrado en el local storage");let n=[s.N.apiUrl,"finca","usuario",t].join("/");return this.http.get(n)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function z(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleModoEdicion()}),e._uU(1," Editar "),e._UZ(2,"i",17),e.qZA()}}function Q(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleModoEdicion()}),e._UZ(1,"i",19),e._uU(2," Salir Modo Edici\xf3n "),e.qZA()}}function Y(o,i){1&o&&(e.TgZ(0,"th",10),e._UZ(1,"i",20),e.qZA())}const Z=function(o){return["/dashboard/actualizar-finca",o]},O=function(o){return["/dashboard/borrar-finca",o]};function D(o,i){if(1&o&&(e.TgZ(0,"td")(1,"a",22),e._UZ(2,"i",23),e._uU(3," Editar "),e.qZA(),e.TgZ(4,"a",22),e._UZ(5,"i",24),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(2,Z,t.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(4,O,t.id))}}function B(o,i){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,D,6,6,"td",21),e.qZA()),2&o){const t=i.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.ubicacion),e.xp6(2),e.hij("",t.area_total," m\xb2"),e.xp6(2),e.Oqu(t.telefono),e.xp6(2),e.Oqu(t.observaciones),e.xp6(1),e.Q6J("ngIf",n.modoEdicion)}}function j(o,i){if(1&o&&(e.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"h5",28),e._uU(4),e.qZA(),e.TgZ(5,"p",29)(6,"strong"),e._uU(7,"Ubicaci\xf3n:"),e.qZA(),e._uU(8),e._UZ(9,"br"),e.TgZ(10,"strong"),e._uU(11,"\xc1rea:"),e.qZA(),e._uU(12),e._UZ(13,"br"),e.TgZ(14,"strong"),e._uU(15,"Tel\xe9fono:"),e.qZA(),e._uU(16),e._UZ(17,"br"),e.TgZ(18,"strong"),e._uU(19,"Observaciones:"),e.qZA(),e._uU(20),e.qZA(),e.TgZ(21,"a",22),e._UZ(22,"i",23),e._uU(23," Editar "),e.qZA(),e.TgZ(24,"a",30),e._UZ(25,"i",24),e.qZA()()()()),2&o){const t=i.$implicit;e.xp6(4),e.Oqu(t.nombre),e.xp6(4),e.hij(" ",t.ubicacion,""),e.xp6(4),e.hij(" ",t.area_total," m\xb2"),e.xp6(4),e.hij(" ",t.telefono,""),e.xp6(4),e.hij(" ",t.observaciones," "),e.xp6(1),e.Q6J("routerLink",e.VKq(7,Z,t.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(9,O,t.id))}}let H=(()=>{class o{constructor(t,n){this.fs=t,this.router=n,this.modoEdicion=!1}ngOnInit(){this.cargarFincas()}cargarFincas(){const t=localStorage.getItem("rol");let n;if("administrador"===t)n=this.fs.obtenerFinca();else{if("agricultor"!==t)return void console.error("Rol de usuario no reconocido");n=this.fs.obtenerFincaIdUsuario()}n.subscribe({next:r=>{this.fincas=r,console.log(r)},error:r=>{console.error("Error al cargar las fincas:",r)}})}crearFinca(){this.router.navigate(["dashboard/crear-finca"])}editarFinca(t){this.router.navigate(["dashboard/actualizar-finca",t.id])}eliminarFinca(t){confirm("\xbfEst\xe1s seguro de que deseas eliminar esta finca?")&&this.fs.eliminarRegistroFinca(t).subscribe({next:()=>{this.cargarFincas(),console.log("Finca eliminada exitosamente.")},error:n=>{console.error("Error al eliminar la finca:",n)}})}toggleModoEdicion(){this.modoEdicion=!this.modoEdicion}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p),e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-finca"]],decls:29,vars:5,consts:[[1,"container-fluid"],[1,"row","mb-3"],[1,"col-12","col-md-6","mb-2","mb-md-0"],["type","button",1,"btn","btn-primary","w-100",3,"click"],[1,"col-12","col-md-6","text-md-end"],["title","Modo Edici\xf3n","class","btn btn-outline-danger",3,"click",4,"ngIf"],["title","Salir modo edici\xf3n","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"d-none","d-md-block"],[1,"table-responsive"],[1,"table","table-hover","table-striped-columns","table-bordered","border-primary-subtle"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-md-none"],[1,"row","row-cols-1","g-4"],["class","col",4,"ngFor","ngForOf"],["title","Modo Edici\xf3n",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-gear-wide-connected"],["title","Salir modo edici\xf3n",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-x-square-fill"],["title","Editar",1,"bi","bi-feather"],[4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"routerLink"],[1,"bi","bi-pencil"],[1,"bi","bi-trash3"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-sm","btn-outline-danger",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.crearFinca()}),e._uU(4,"Crear Finca"),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,z,3,0,"button",5),e.YNc(7,Q,3,0,"button",6),e.qZA()(),e.TgZ(8,"div",7)(9,"div",8)(10,"table",9)(11,"thead")(12,"tr")(13,"th",10),e._uU(14,"Nombre"),e.qZA(),e.TgZ(15,"th",10),e._uU(16,"Ubicaci\xf3n"),e.qZA(),e.TgZ(17,"th",10),e._uU(18,"\xc1rea"),e.qZA(),e.TgZ(19,"th",10),e._uU(20,"Tel\xe9fono"),e.qZA(),e.TgZ(21,"th",10),e._uU(22,"Observaciones"),e.qZA(),e.YNc(23,Y,2,0,"th",11),e.qZA()(),e.TgZ(24,"tbody"),e.YNc(25,B,12,6,"tr",12),e.qZA()()()(),e.TgZ(26,"div",13)(27,"div",14),e.YNc(28,j,26,11,"div",15),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngIf",!n.modoEdicion),e.xp6(1),e.Q6J("ngIf",n.modoEdicion),e.xp6(16),e.Q6J("ngIf",n.modoEdicion),e.xp6(2),e.Q6J("ngForOf",n.fincas),e.xp6(3),e.Q6J("ngForOf",n.fincas))},directives:[d.O5,d.sg,l.yS],styles:["button[_ngcontent-%COMP%]{margin-bottom:1rem}thead[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{margin:auto!important}.container-fluid[_ngcontent-%COMP%]{padding:1rem}.container-fluid[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:1.5rem}.container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#6f4e37;border-color:#6f4e37;color:#fff;font-size:1rem;padding:.75rem;width:100%;transition:background-color .3s ease}.container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active{background-color:#5a3e2e;border-color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]{color:#5a3e2e;border-color:#5a3e2e;padding:.5rem 1rem;transition:background-color .3s ease}.container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:active{background-color:tan;border-color:#5a3e2e;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem}.container-fluid[_ngcontent-%COMP%]   .table.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#6f4e371a}.container-fluid[_ngcontent-%COMP%]   .table.table-bordered[_ngcontent-%COMP%]{border-color:tan}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;padding:1rem}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#6f4e37;color:#fff}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#6f4e37}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{color:#6f4e37;border-color:#6f4e37;padding:.5rem}.container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:active{background-color:tan;border-color:#5a3e2e;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:1px solid #D2B48C;border-radius:10px}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#fffdd0;padding:1rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#6f4e37;font-weight:700;font-size:1.25rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:1rem;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#6f4e37}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{color:#6f4e37;border-color:#6f4e37;padding:.5rem;margin-right:.5rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]:active{background-color:tan;border-color:#5a3e2e;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]{color:#5a3e2e;border-color:#5a3e2e;padding:.5rem}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:hover, .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:focus, .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:active{background-color:tan;border-color:#5a3e2e;color:#5a3e2e}.container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}@media (max-width: 576px){.container-fluid[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .container-fluid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{font-size:.875rem}.container-fluid[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem}.container-fluid[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:.9rem}}"]}),o})(),h=(()=>{class o{constructor(t){this.http=t}obtenersensor(){let t=[s.N.apiUrl,"sensor"].join("/");return this.http.get(t)}obtenersensorId(t){let n=[s.N.apiUrl,"sensor",t].join("/");return this.http.get(n)}agregarsensor(t){let n=[s.N.apiUrl,"sensor"].join("/");return this.http.post(n,t)}editarsensor(t,n){let r=[s.N.apiUrl,"sensor",n].join("/");return this.http.put(r,t)}eliminarRegistrosensor(t){let n=[s.N.apiUrl,"sensor",t].join("/");return this.http.delete(n)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function L(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleModoEdicion()}),e._uU(1," Editar "),e._UZ(2,"i",17),e.qZA()}}function R(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleModoEdicion()}),e._UZ(1,"i",19),e._uU(2," Salir Modo Edici\xf3n "),e.qZA()}}function V(o,i){1&o&&(e.TgZ(0,"th",10),e._UZ(1,"i",20),e.qZA())}const P=function(o){return["/dashboard/actualizar-sensor",o]},T=function(o){return["/dashboard/borrar-sensor",o]};function X(o,i){if(1&o&&(e.TgZ(0,"td")(1,"a",22),e._UZ(2,"i",23),e._uU(3," Editar "),e.qZA(),e.TgZ(4,"a",24),e._UZ(5,"i",25),e._uU(6," Eliminar "),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(2,P,t.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(4,T,t.id))}}function K(o,i){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.YNc(9,X,7,6,"td",21),e.qZA()),2&o){const t=i.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(t.marca_modelo),e.xp6(2),e.Oqu(t.fecha_instalacion),e.xp6(2),e.Oqu(t.id_cultivo),e.xp6(1),e.Q6J("ngIf",n.modoEdicion)}}function G(o,i){if(1&o&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"h5",29),e._uU(4),e.qZA(),e.TgZ(5,"p",30)(6,"strong"),e._uU(7,"Marca y Modelo:"),e.qZA(),e._uU(8),e._UZ(9,"br"),e.TgZ(10,"strong"),e._uU(11,"Fecha Instalaci\xf3n:"),e.qZA(),e._uU(12),e._UZ(13,"br"),e.TgZ(14,"strong"),e._uU(15,"ID de Cultivo:"),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"a",22),e._UZ(18,"i",23),e._uU(19," Editar "),e.qZA(),e.TgZ(20,"a",24),e._UZ(21,"i",25),e._uU(22," Eliminar "),e.qZA()()()()),2&o){const t=i.$implicit;e.xp6(4),e.Oqu(t.tipo),e.xp6(4),e.hij(" ",t.marca_modelo," "),e.xp6(4),e.hij(" ",t.fecha_instalacion," "),e.xp6(4),e.hij(" ",t.id_cultivo," "),e.xp6(1),e.Q6J("routerLink",e.VKq(6,P,t.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(8,T,t.id))}}let W=(()=>{class o{constructor(t,n){this.ss=t,this.router=n,this.modoEdicion=!1}ngOnInit(){this.cargarSensores()}cargarSensores(){const t=localStorage.getItem("rol");let n;if("administrador"===t)n=this.ss.obtenersensor();else{if("agricultor"!==t)return void console.error("Rol de usuario no reconocido");n=this.ss.obtenersensor()}n.subscribe({next:r=>{this.sensor=r,console.log(r)},error:r=>{console.error("Error al cargar los sensores:",r)}})}crearSensor(){this.router.navigate(["dashboard/crear-sensor"])}toggleModoEdicion(){this.modoEdicion=!this.modoEdicion}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h),e.Y36(l.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sensor"]],decls:27,vars:5,consts:[[1,"container-fluid"],[1,"row","mb-3"],[1,"col-12","col-md-6","mb-2","mb-md-0"],["type","button",1,"btn","btn-primary","w-100",3,"click"],[1,"col-12","col-md-6","text-md-end"],["title","Modo Edici\xf3n","class","btn btn-outline-danger",3,"click",4,"ngIf"],["title","Salir modo edici\xf3n","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"d-none","d-md-block"],[1,"table-responsive"],[1,"table","table-hover","table-striped-columns","table-bordered","border-primary-subtle"],["scope","col"],["scope","col",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-md-none"],[1,"row","row-cols-1","g-4"],["class","col",4,"ngFor","ngForOf"],["title","Modo Edici\xf3n",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-gear-wide-connected"],["title","Salir modo edici\xf3n",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-x-square-fill"],["title","Editar",1,"bi","bi-feather"],[4,"ngIf"],[1,"btn","btn-sm","btn-outline-primary",3,"routerLink"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"routerLink"],[1,"bi","bi-trash3"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.crearSensor()}),e._uU(4,"Crear Sensor"),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,L,3,0,"button",5),e.YNc(7,R,3,0,"button",6),e.qZA()(),e.TgZ(8,"div",7)(9,"div",8)(10,"table",9)(11,"thead")(12,"tr")(13,"th",10),e._uU(14,"Tipo"),e.qZA(),e.TgZ(15,"th",10),e._uU(16,"Marca y Modelo"),e.qZA(),e.TgZ(17,"th",10),e._uU(18,"Fecha Instalaci\xf3n"),e.qZA(),e.TgZ(19,"th",10),e._uU(20,"ID de Cultivo"),e.qZA(),e.YNc(21,V,2,0,"th",11),e.qZA()(),e.TgZ(22,"tbody"),e.YNc(23,K,10,5,"tr",12),e.qZA()()()(),e.TgZ(24,"div",13)(25,"div",14),e.YNc(26,G,23,10,"div",15),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngIf",!n.modoEdicion),e.xp6(1),e.Q6J("ngIf",n.modoEdicion),e.xp6(14),e.Q6J("ngIf",n.modoEdicion),e.xp6(2),e.Q6J("ngForOf",n.sensor),e.xp6(3),e.Q6J("ngForOf",n.sensor))},directives:[d.O5,d.sg,l.yS],styles:[""]}),o})();function ee(o,i){1&o&&(e.TgZ(0,"div",24),e._uU(1," Finca creada exitosamente. Redirigiendo... "),e.qZA())}function te(o,i){1&o&&(e.TgZ(0,"div",25),e._uU(1," Error al crear la finca. Por favor, int\xe9ntelo de nuevo. "),e.qZA())}function ne(o,i){1&o&&(e.TgZ(0,"div",26),e._uU(1," Por favor, complete todos los campos requeridos. "),e.qZA())}let oe=(()=>{class o{constructor(t,n){this.router=t,this.fincaService=n,this.is_ok=!1,this.is_error=!1,this.is_empty=!1,this.finca={nombre:"",ubicacion:"",area_total:"",telefono:"",observaciones:"",id_usuario:""}}ngOnInit(){this.finca.id_usuario=localStorage.getItem("id")||""}crearFinca(){console.log("Datos de la finca a crear:",this.finca),this.finca.nombre&&this.finca.ubicacion&&this.finca.area_total&&this.finca.telefono&&this.finca.id_usuario?this.fincaService.agregarFinca(this.finca).subscribe({next:t=>{this.is_ok=!0,this.is_error=!1,this.is_empty=!1,console.log("Finca creada exitosamente:",t)},error:t=>{this.is_ok=!1,this.is_error=!0,this.is_empty=!1,console.error("Error al crear la finca:",t)}}):(this.is_ok=!1,this.is_error=!1,this.is_empty=!0,console.log("Faltan datos requeridos"))}goBack(){this.router.navigate(["dashboard/finca"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.F0),e.Y36(p))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-crear-finca"]],decls:36,vars:9,consts:[[1,"container","mt-5"],[1,"card","shadow"],[1,"card-body"],[1,"card-title","text-center","mb-4"],[3,"ngSubmit"],["fincaForm","ngForm"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","ubicacion",1,"form-label"],["type","text","id","ubicacion","name","ubicacion","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","area_total",1,"form-label"],["type","number","id","area_total","name","area_total","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","telefono",1,"form-label"],["type","tel","id","telefono","name","telefono","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","observaciones",1,"form-label"],["id","observaciones","name","observaciones","rows","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-3"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-warning"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Crear Nueva Finca"),e.qZA(),e.TgZ(5,"form",4,5),e.NdJ("ngSubmit",function(){return n.crearFinca()}),e.TgZ(7,"div",6)(8,"label",7),e._uU(9,"Nombre"),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(a){return n.finca.nombre=a}),e.qZA()(),e.TgZ(11,"div",6)(12,"label",9),e._uU(13,"Ubicaci\xf3n"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(a){return n.finca.ubicacion=a}),e.qZA()(),e.TgZ(15,"div",6)(16,"label",11),e._uU(17,"\xc1rea Total"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(a){return n.finca.area_total=a}),e.qZA()(),e.TgZ(19,"div",6)(20,"label",13),e._uU(21,"Tel\xe9fono"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(a){return n.finca.telefono=a}),e.qZA()(),e.TgZ(23,"div",6)(24,"label",15),e._uU(25,"Observaciones"),e.qZA(),e.TgZ(26,"textarea",16),e.NdJ("ngModelChange",function(a){return n.finca.observaciones=a}),e.qZA()(),e.TgZ(27,"div",17)(28,"button",18),e._uU(29,"Crear Finca"),e.qZA(),e.TgZ(30,"button",19),e.NdJ("click",function(){return n.goBack()}),e._uU(31,"Volver"),e.qZA()()()()(),e.TgZ(32,"div",20),e.YNc(33,ee,2,0,"div",21),e.YNc(34,te,2,0,"div",22),e.YNc(35,ne,2,0,"div",23),e.qZA()()),2&t){const r=e.MAs(6);e.xp6(10),e.Q6J("ngModel",n.finca.nombre),e.xp6(4),e.Q6J("ngModel",n.finca.ubicacion),e.xp6(4),e.Q6J("ngModel",n.finca.area_total),e.xp6(4),e.Q6J("ngModel",n.finca.telefono),e.xp6(4),e.Q6J("ngModel",n.finca.observaciones),e.xp6(2),e.Q6J("disabled",!r.form.valid),e.xp6(5),e.Q6J("ngIf",n.is_ok),e.xp6(1),e.Q6J("ngIf",n.is_error),e.xp6(1),e.Q6J("ngIf",n.is_empty)}},directives:[c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On,c.wV,d.O5],styles:[".container[_ngcontent-%COMP%]{margin-top:2rem}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;box-shadow:0 .125rem .25rem #00000013}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#007bff;border-bottom:none;padding:.75rem 1rem}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .btn-outline-light[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;border-color:#ffffff80}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .btn-outline-light[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .btn-outline-light[_ngcontent-%COMP%]   .bi-arrow-left[_ngcontent-%COMP%]{font-size:.75rem;margin-right:.25rem}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#fff;margin-bottom:0;font-size:1.25rem;font-weight:500}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem;color:#495057}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:.25rem;border-color:#ced4da}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .2rem #007bff40}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:1rem;background-color:#007bff;border-color:#007bff}.container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem 1rem;border-radius:.25rem}.container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   .bi[_ngcontent-%COMP%]{margin-right:.5rem}.container[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border-color:#f5c6cb;color:#721c24}.container[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;border-color:#c3e6cb;color:#155724}.container[_ngcontent-%COMP%]   .alert.alert-warning[_ngcontent-%COMP%]{background-color:#fff3cd;border-color:#ffeeba;color:#856404}[hidden][_ngcontent-%COMP%]{display:none!important}"]}),o})();var re=u(257);function ie(o,i){1&o&&(e.TgZ(0,"div",29),e._uU(1," Cultivo creado exitosamente. Redirigiendo... "),e.qZA())}function ae(o,i){1&o&&(e.TgZ(0,"div",30),e._uU(1," Error al crear el cultivo. Por favor, int\xe9ntelo de nuevo. "),e.qZA())}function ce(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Por favor, complete todos los campos requeridos. "),e.qZA())}let le=(()=>{class o{constructor(t,n){this.router=t,this.cultivoService=n,this.is_ok=!1,this.is_error=!1,this.is_empty=!1,this.cultivo={nombre:"",fecha_siembra:"",fecha_cosecha_estimada:"",id_finca:"",estado_cultivo:"",area_cultivo:""}}ngOnInit(){}crearCultivo(){console.log("Datos del cultivo a crear:",this.cultivo),this.cultivo.nombre&&this.cultivo.fecha_siembra&&this.cultivo.fecha_cosecha_estimada&&this.cultivo.id_finca&&this.cultivo.estado_cultivo&&this.cultivo.area_cultivo?(this.cultivo.fecha_siembra=this.formatDate(this.cultivo.fecha_siembra),this.cultivo.fecha_cosecha_estimada=this.formatDate(this.cultivo.fecha_cosecha_estimada),this.cultivoService.agregarcultivo(this.cultivo).subscribe({next:t=>{this.is_ok=!0,this.is_error=!1,this.is_empty=!1,console.log("Cultivo creado exitosamente:",t)},error:t=>{this.is_ok=!1,this.is_error=!0,this.is_empty=!1,console.error("Error al crear el cultivo:",t)}})):(this.is_ok=!1,this.is_error=!1,this.is_empty=!0,console.log("Faltan datos requeridos"))}formatDate(t){const[n,r,a]=t.split("/");return`${a}-${r}-${n}`}goBack(){this.router.navigate(["dashboard/cultivo"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.F0),e.Y36(f))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-crear-cultivo"]],decls:46,vars:10,consts:[[1,"container","mt-5"],[1,"card","shadow"],[1,"card-body"],[1,"card-title","text-center","mb-4"],[3,"ngSubmit"],["cultivoForm","ngForm"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","fecha_siembra",1,"form-label"],["type","date","id","fecha_siembra","name","fecha_siembra","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","fecha_cosecha_estimada",1,"form-label"],["type","date","id","fecha_cosecha_estimada","name","fecha_cosecha_estimada","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","id_finca",1,"form-label"],["type","text","id","id_finca","name","id_finca","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","estado_cultivo",1,"form-label"],["id","estado_cultivo","name","estado_cultivo","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","activo"],["value","cosechado"],["value","en_reposo"],["for","area_cultivo",1,"form-label"],["type","number","id","area_cultivo","name","area_cultivo","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-3"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-warning"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Crear Nuevo Cultivo"),e.qZA(),e.TgZ(5,"form",4,5),e.NdJ("ngSubmit",function(){return n.crearCultivo()}),e.TgZ(7,"div",6)(8,"label",7),e._uU(9,"Nombre del Cultivo"),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(a){return n.cultivo.nombre=a}),e.qZA()(),e.TgZ(11,"div",6)(12,"label",9),e._uU(13,"Fecha de Siembra"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(a){return n.cultivo.fecha_siembra=a}),e.qZA()(),e.TgZ(15,"div",6)(16,"label",11),e._uU(17,"Fecha Estimada de Cosecha"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(a){return n.cultivo.fecha_cosecha_estimada=a}),e.qZA()(),e.TgZ(19,"div",6)(20,"label",13),e._uU(21,"ID de la Finca"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(a){return n.cultivo.id_finca=a}),e.qZA()(),e.TgZ(23,"div",6)(24,"label",15),e._uU(25,"Estado del Cultivo"),e.qZA(),e.TgZ(26,"select",16),e.NdJ("ngModelChange",function(a){return n.cultivo.estado_cultivo=a}),e.TgZ(27,"option",17),e._uU(28,"Activo"),e.qZA(),e.TgZ(29,"option",18),e._uU(30,"Cosechado"),e.qZA(),e.TgZ(31,"option",19),e._uU(32,"En Reposo"),e.qZA()()(),e.TgZ(33,"div",6)(34,"label",20),e._uU(35,"\xc1rea del Cultivo (m\xb2)"),e.qZA(),e.TgZ(36,"input",21),e.NdJ("ngModelChange",function(a){return n.cultivo.area_cultivo=a}),e.qZA()(),e.TgZ(37,"div",22)(38,"button",23),e._uU(39,"Crear Cultivo"),e.qZA(),e.TgZ(40,"button",24),e.NdJ("click",function(){return n.goBack()}),e._uU(41,"Volver"),e.qZA()()()()(),e.TgZ(42,"div",25),e.YNc(43,ie,2,0,"div",26),e.YNc(44,ae,2,0,"div",27),e.YNc(45,ce,2,0,"div",28),e.qZA()()),2&t){const r=e.MAs(6);e.xp6(10),e.Q6J("ngModel",n.cultivo.nombre),e.xp6(4),e.Q6J("ngModel",n.cultivo.fecha_siembra),e.xp6(4),e.Q6J("ngModel",n.cultivo.fecha_cosecha_estimada),e.xp6(4),e.Q6J("ngModel",n.cultivo.id_finca),e.xp6(4),e.Q6J("ngModel",n.cultivo.estado_cultivo),e.xp6(10),e.Q6J("ngModel",n.cultivo.area_cultivo),e.xp6(2),e.Q6J("disabled",!r.form.valid),e.xp6(5),e.Q6J("ngIf",n.is_ok),e.xp6(1),e.Q6J("ngIf",n.is_error),e.xp6(1),e.Q6J("ngIf",n.is_empty)}},directives:[c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On,c.EJ,c.YN,c.Kr,c.wV,d.O5],styles:[""]}),o})();function se(o,i){1&o&&(e.TgZ(0,"div",17),e._uU(1," El cultivo ha sido eliminado exitosamente. "),e.qZA())}function de(o,i){1&o&&(e.TgZ(0,"div",18),e._uU(1," No se puede eliminar el cultivo porque tiene datos relacionados. "),e.qZA())}function ue(o,i){1&o&&(e.TgZ(0,"div",11),e._uU(1," No se ha encontrado el ID del cultivo. "),e.qZA())}let ge=(()=>{class o{constructor(t,n,r){this.cultivoService=t,this.router=n,this.route=r,this.is_ok=!1,this.is_error=!1,this.is_empty=!1,this.cultivo={nombre:"",fecha_siembra:"",fecha_cosecha_estimada:"",id_finca:"",estado_cultivo:"",area_cultivo:""},this.cultivoId=null}ngOnInit(){this.cultivoId=this.route.snapshot.paramMap.get("id"),this.cultivoId&&this.cargarCultivo()}cargarCultivo(){this.cultivoId&&this.cultivoService.obtenercultivoId({id:this.cultivoId}).subscribe({next:t=>{this.cultivo=t,console.log("Datos de la cultivo cargados:",t)},error:t=>{console.error("Error al cargar el cultivo:",t)}})}borrarCultivo(){this.cultivoId?this.cultivoService.eliminarRegistrocultivo(this.cultivoId).subscribe({next:t=>{this.is_ok=!0,this.is_error=!1,this.is_empty=!1,setTimeout(()=>{this.router.navigate(["dashboard/cultivo"])},2e3),console.log("Cultivo eliminado exitosamente:",t)},error:t=>{this.is_ok=!1,this.is_error=!0,this.is_empty=!1,console.error("No se puede eliminar el cultivo porque tiene datos relacionados:",t)}}):(this.is_ok=!1,this.is_error=!1,this.is_empty=!0,console.log("ID de cultivo no encontrado"))}goBack(){this.router.navigate(["dashboard/cultivo"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f),e.Y36(l.F0),e.Y36(l.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-borrar-cultivo"]],decls:41,vars:9,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-8"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"card"],[1,"card-header","bg-danger","text-white"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["role","alert",1,"alert","alert-warning"],[1,"d-flex","justify-content-between"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-arrow-left"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,se,2,0,"div",3),e.YNc(4,de,2,0,"div",4),e.YNc(5,ue,2,0,"div",5),e.TgZ(6,"div",6)(7,"div",7),e._uU(8," Confirmar eliminaci\xf3n "),e.qZA(),e.TgZ(9,"div",8)(10,"h5",9),e._uU(11),e.qZA(),e.TgZ(12,"p",10)(13,"strong"),e._uU(14,"Fecha de siembra:"),e.qZA(),e._uU(15),e._UZ(16,"br"),e.TgZ(17,"strong"),e._uU(18,"Fecha estimada de cosecha:"),e.qZA(),e._uU(19),e._UZ(20,"br"),e.TgZ(21,"strong"),e._uU(22,"ID de la finca:"),e.qZA(),e._uU(23),e._UZ(24,"br"),e.TgZ(25,"strong"),e._uU(26,"Estado del cultivo:"),e.qZA(),e._uU(27),e._UZ(28,"br"),e.TgZ(29,"strong"),e._uU(30,"\xc1rea del cultivo:"),e.qZA(),e._uU(31),e.qZA(),e.TgZ(32,"div",11),e._uU(33," \xbfEst\xe1s seguro de que deseas eliminar este cultivo? Esta acci\xf3n no se puede deshacer. "),e.qZA(),e.TgZ(34,"div",12)(35,"button",13),e.NdJ("click",function(){return n.borrarCultivo()}),e._UZ(36,"i",14),e._uU(37," Eliminar "),e.qZA(),e.TgZ(38,"button",15),e.NdJ("click",function(){return n.goBack()}),e._UZ(39,"i",16),e._uU(40," Cancelar "),e.qZA()()()()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.is_ok),e.xp6(1),e.Q6J("ngIf",n.is_error),e.xp6(1),e.Q6J("ngIf",n.is_empty),e.xp6(6),e.Oqu(n.cultivo.nombre),e.xp6(4),e.hij(" ",n.cultivo.fecha_siembra,""),e.xp6(4),e.hij(" ",n.cultivo.fecha_cosecha_estimada,""),e.xp6(4),e.hij(" ",n.cultivo.id_finca,""),e.xp6(4),e.hij(" ",n.cultivo.estado_cultivo,""),e.xp6(4),e.hij(" ",n.cultivo.area_cultivo," m\xb2 "))},directives:[d.O5],styles:[""]}),o})();function _e(o,i){1&o&&(e.TgZ(0,"div",22),e._uU(1," Sensor creado exitosamente. Redirigiendo... "),e.qZA())}function me(o,i){1&o&&(e.TgZ(0,"div",23),e._uU(1," Error al crear el sensor. Por favor, int\xe9ntelo de nuevo. "),e.qZA())}function fe(o,i){1&o&&(e.TgZ(0,"div",24),e._uU(1," Por favor, complete todos los campos requeridos. "),e.qZA())}let pe=(()=>{class o{constructor(t,n){this.router=t,this.sensorService=n,this.is_ok=!1,this.is_error=!1,this.is_empty=!1,this.sensor={tipo:"",marca_modelo:"",fecha_instalacion:"",id_cultivo:""}}ngOnInit(){}crearSensor(){console.log("Datos del sensor a crear:",this.sensor),this.sensor.tipo&&this.sensor.marca_modelo&&this.sensor.fecha_instalacion&&this.sensor.id_cultivo?this.sensorService.agregarsensor(this.sensor).subscribe({next:t=>{this.is_ok=!0,this.is_error=!1,this.is_empty=!1,console.log("Sensor creado exitosamente:",t)},error:t=>{this.is_ok=!1,this.is_error=!0,this.is_empty=!1,console.error("Error al crear el sensor:",t)}}):(this.is_ok=!1,this.is_error=!1,this.is_empty=!0,console.log("Faltan datos requeridos"))}goBack(){this.router.navigate(["dashboard/sensor"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.F0),e.Y36(h))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-crear-sensor"]],decls:32,vars:8,consts:[[1,"container","mt-5"],[1,"card","shadow"],[1,"card-body"],[1,"card-title","text-center","mb-4"],[3,"ngSubmit"],["sensorForm","ngForm"],[1,"mb-3"],["for","tipo",1,"form-label"],["type","text","id","tipo","name","tipo","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","marca_modelo",1,"form-label"],["type","text","id","marca_modelo","name","marca_modelo","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","fecha_instalacion",1,"form-label"],["type","date","id","fecha_instalacion","name","fecha_instalacion","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","id_cultivo",1,"form-label"],["type","text","id","id_cultivo","name","id_cultivo","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-3"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-warning"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Crear Nuevo Sensor"),e.qZA(),e.TgZ(5,"form",4,5),e.NdJ("ngSubmit",function(){return n.crearSensor()}),e.TgZ(7,"div",6)(8,"label",7),e._uU(9,"Tipo de Sensor"),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(a){return n.sensor.tipo=a}),e.qZA()(),e.TgZ(11,"div",6)(12,"label",9),e._uU(13,"Marca/Modelo del Sensor"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(a){return n.sensor.marca_modelo=a}),e.qZA()(),e.TgZ(15,"div",6)(16,"label",11),e._uU(17,"Fecha de Instalaci\xf3n"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(a){return n.sensor.fecha_instalacion=a}),e.qZA()(),e.TgZ(19,"div",6)(20,"label",13),e._uU(21,"ID del Cultivo"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(a){return n.sensor.id_cultivo=a}),e.qZA()(),e.TgZ(23,"div",15)(24,"button",16),e._uU(25,"Crear Sensor"),e.qZA(),e.TgZ(26,"button",17),e.NdJ("click",function(){return n.goBack()}),e._uU(27,"Volver"),e.qZA()()()()(),e.TgZ(28,"div",18),e.YNc(29,_e,2,0,"div",19),e.YNc(30,me,2,0,"div",20),e.YNc(31,fe,2,0,"div",21),e.qZA()()),2&t){const r=e.MAs(6);e.xp6(10),e.Q6J("ngModel",n.sensor.tipo),e.xp6(4),e.Q6J("ngModel",n.sensor.marca_modelo),e.xp6(4),e.Q6J("ngModel",n.sensor.fecha_instalacion),e.xp6(4),e.Q6J("ngModel",n.sensor.id_cultivo),e.xp6(2),e.Q6J("disabled",!r.form.valid),e.xp6(5),e.Q6J("ngIf",n.is_ok),e.xp6(1),e.Q6J("ngIf",n.is_error),e.xp6(1),e.Q6J("ngIf",n.is_empty)}},directives:[c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On,d.O5],styles:[""]}),o})(),A=(()=>{class o{constructor(t){this.router=t}canActivate(t,n){return localStorage.getItem("rol")===t.data.expectedRole||this.router.createUrlTree(["/dashboard/default"])}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(l.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function he(o,i){1&o&&(e.TgZ(0,"div",24),e._uU(1," Finca actualizada exitosamente. Redirigiendo... "),e.qZA())}function be(o,i){1&o&&(e.TgZ(0,"div",25),e._uU(1," Error al actualizar la finca. Por favor, int\xe9ntelo de nuevo. "),e.qZA())}function Ce(o,i){1&o&&(e.TgZ(0,"div",26),e._uU(1," Por favor, complete todos los campos requeridos. "),e.qZA())}let ve=(()=>{class o{constructor(t,n,r){this.fincaService=t,this.router=n,this.route=r,this.is_ok=!1,this.is_error=!1,this.is_empty=!1,this.finca={nombre:"",ubicacion:"",area_total:"",telefono:"",observaciones:"",id_usuario:""},this.fincaId=null}ngOnInit(){this.fincaId=this.route.snapshot.paramMap.get("id"),this.fincaId&&this.cargarFinca()}cargarFinca(){this.fincaId&&this.fincaService.obtenerFincaId({id:this.fincaId}).subscribe({next:t=>{this.finca=t,console.log("Datos de la finca cargados:",t)},error:t=>{console.error("Error al cargar la finca:",t)}})}actualizarFinca(){this.fincaId?this.fincaService.editarFinca(this.finca,this.fincaId).subscribe({next:t=>{this.is_ok=!0,this.is_error=!1,this.is_empty=!1,setTimeout(()=>{this.router.navigate(["dashboard/finca"])},2e3),console.log("Finca actualizada exitosamente:",t)},error:t=>{this.is_ok=!1,this.is_error=!0,this.is_empty=!1,console.error("Error al actualizar la finca:",t)}}):(this.is_ok=!1,this.is_error=!1,this.is_empty=!0,console.log("ID de finca no encontrado"))}goBack(){this.router.navigate(["dashboard/finca"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p),e.Y36(l.F0),e.Y36(l.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-actualizar-finca"]],decls:36,vars:9,consts:[[1,"container","mt-5"],[1,"card","shadow"],[1,"card-body"],[1,"card-title","text-center","mb-4"],[3,"ngSubmit"],["fincaForm","ngForm"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","ubicacion",1,"form-label"],["type","text","id","ubicacion","name","ubicacion","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","area_total",1,"form-label"],["type","number","id","area_total","name","area_total","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","telefono",1,"form-label"],["type","tel","id","telefono","name","telefono","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","observaciones",1,"form-label"],["id","observaciones","name","observaciones","rows","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-3"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-warning"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Actualizar Finca"),e.qZA(),e.TgZ(5,"form",4,5),e.NdJ("ngSubmit",function(){return n.actualizarFinca()}),e.TgZ(7,"div",6)(8,"label",7),e._uU(9,"Nombre"),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(a){return n.finca.nombre=a}),e.qZA()(),e.TgZ(11,"div",6)(12,"label",9),e._uU(13,"Ubicaci\xf3n"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(a){return n.finca.ubicacion=a}),e.qZA()(),e.TgZ(15,"div",6)(16,"label",11),e._uU(17,"\xc1rea Total"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(a){return n.finca.area_total=a}),e.qZA()(),e.TgZ(19,"div",6)(20,"label",13),e._uU(21,"Tel\xe9fono"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(a){return n.finca.telefono=a}),e.qZA()(),e.TgZ(23,"div",6)(24,"label",15),e._uU(25,"Observaciones"),e.qZA(),e.TgZ(26,"textarea",16),e.NdJ("ngModelChange",function(a){return n.finca.observaciones=a}),e.qZA()(),e.TgZ(27,"div",17)(28,"button",18),e._uU(29,"Actualizar Finca"),e.qZA(),e.TgZ(30,"button",19),e.NdJ("click",function(){return n.goBack()}),e._uU(31,"Volver"),e.qZA()()()()(),e.TgZ(32,"div",20),e.YNc(33,he,2,0,"div",21),e.YNc(34,be,2,0,"div",22),e.YNc(35,Ce,2,0,"div",23),e.qZA()()),2&t){const r=e.MAs(6);e.xp6(10),e.Q6J("ngModel",n.finca.nombre),e.xp6(4),e.Q6J("ngModel",n.finca.ubicacion),e.xp6(4),e.Q6J("ngModel",n.finca.area_total),e.xp6(4),e.Q6J("ngModel",n.finca.telefono),e.xp6(4),e.Q6J("ngModel",n.finca.observaciones),e.xp6(2),e.Q6J("disabled",!r.form.valid),e.xp6(5),e.Q6J("ngIf",n.is_ok),e.xp6(1),e.Q6J("ngIf",n.is_error),e.xp6(1),e.Q6J("ngIf",n.is_empty)}},directives:[c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On,c.wV,d.O5],styles:[""]}),o})();function Me(o,i){1&o&&(e.TgZ(0,"div",17),e._uU(1," La finca ha sido eliminada exitosamente. "),e.qZA())}function Ze(o,i){1&o&&(e.TgZ(0,"div",18),e._uU(1," No se puede eliminar la finca porque tiene datos relacionados. "),e.qZA())}function Oe(o,i){1&o&&(e.TgZ(0,"div",11),e._uU(1," No se ha encontrado el ID de la finca. "),e.qZA())}let Pe=(()=>{class o{constructor(t,n,r){this.fincaService=t,this.router=n,this.route=r,this.is_ok=!1,this.is_error=!1,this.is_empty=!1,this.finca={nombre:"",ubicacion:"",area_total:"",telefono:"",observaciones:"",id_usuario:""},this.fincaId=null}ngOnInit(){this.fincaId=this.route.snapshot.paramMap.get("id"),this.fincaId&&this.cargarFinca()}cargarFinca(){this.fincaId&&this.fincaService.obtenerFincaId({id:this.fincaId}).subscribe({next:t=>{this.finca=t,console.log("Datos de la finca cargados:",t)},error:t=>{console.error("Error al cargar la finca:",t)}})}borrarFinca(){this.fincaId?this.fincaService.eliminarRegistroFinca(this.fincaId).subscribe({next:t=>{this.is_ok=!0,this.is_error=!1,this.is_empty=!1,setTimeout(()=>{this.router.navigate(["dashboard/finca"])},2e3),console.log("Finca eliminada exitosamente:",t)},error:t=>{this.is_ok=!1,this.is_error=!0,this.is_empty=!1,console.error("No se puede eliminar la finca porque tiene datos relacionados:",t)}}):(this.is_ok=!1,this.is_error=!1,this.is_empty=!0,console.log("ID de finca no encontrado"))}goBack(){this.router.navigate(["dashboard/finca"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p),e.Y36(l.F0),e.Y36(l.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-borrar-finca"]],decls:41,vars:9,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-8"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"card"],[1,"card-header","bg-danger","text-white"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["role","alert",1,"alert","alert-warning"],[1,"d-flex","justify-content-between"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-arrow-left"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Me,2,0,"div",3),e.YNc(4,Ze,2,0,"div",4),e.YNc(5,Oe,2,0,"div",5),e.TgZ(6,"div",6)(7,"div",7),e._uU(8," Confirmar eliminaci\xf3n "),e.qZA(),e.TgZ(9,"div",8)(10,"h5",9),e._uU(11),e.qZA(),e.TgZ(12,"p",10)(13,"strong"),e._uU(14,"Ubicaci\xf3n:"),e.qZA(),e._uU(15),e._UZ(16,"br"),e.TgZ(17,"strong"),e._uU(18,"\xc1rea total:"),e.qZA(),e._uU(19),e._UZ(20,"br"),e.TgZ(21,"strong"),e._uU(22,"Tel\xe9fono:"),e.qZA(),e._uU(23),e._UZ(24,"br"),e.TgZ(25,"strong"),e._uU(26,"Observaciones:"),e.qZA(),e._uU(27),e._UZ(28,"br"),e.TgZ(29,"strong"),e._uU(30,"ID de Usuario:"),e.qZA(),e._uU(31),e.qZA(),e.TgZ(32,"div",11),e._uU(33," \xbfEst\xe1s seguro de que deseas eliminar esta finca? Esta acci\xf3n no se puede deshacer. "),e.qZA(),e.TgZ(34,"div",12)(35,"button",13),e.NdJ("click",function(){return n.borrarFinca()}),e._UZ(36,"i",14),e._uU(37," Eliminar "),e.qZA(),e.TgZ(38,"button",15),e.NdJ("click",function(){return n.goBack()}),e._UZ(39,"i",16),e._uU(40," Cancelar "),e.qZA()()()()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.is_ok),e.xp6(1),e.Q6J("ngIf",n.is_error),e.xp6(1),e.Q6J("ngIf",n.is_empty),e.xp6(6),e.Oqu(n.finca.nombre),e.xp6(4),e.hij(" ",n.finca.ubicacion,""),e.xp6(4),e.hij(" ",n.finca.area_total," m\xb2"),e.xp6(4),e.hij(" ",n.finca.telefono,""),e.xp6(4),e.hij(" ",n.finca.observaciones,""),e.xp6(4),e.hij(" ",n.finca.id_usuario," "))},directives:[d.O5],styles:[""]}),o})();function Te(o,i){1&o&&(e.TgZ(0,"div",22),e._uU(1," Cultivo actualizado exitosamente. Redirigiendo... "),e.qZA())}function Ae(o,i){1&o&&(e.TgZ(0,"div",23),e._uU(1," Error al actualizar el cultivo. Por favor, int\xe9ntelo de nuevo. "),e.qZA())}function ye(o,i){1&o&&(e.TgZ(0,"div",24),e._uU(1," Por favor, complete todos los campos requeridos. "),e.qZA())}let qe=(()=>{class o{constructor(t,n,r){this.cultivoService=t,this.router=n,this.route=r,this.is_ok=!1,this.is_error=!1,this.is_empty=!1,this.cultivo={nombre:"",fecha_siembra:"",fecha_cosecha_estimada:"",id_finca:""},this.cultivoId=null}ngOnInit(){this.cultivoId=this.route.snapshot.paramMap.get("id"),this.cultivoId&&this.cargarCultivo()}cargarCultivo(){this.cultivoId&&this.cultivoService.obtenercultivoId({id:this.cultivoId}).subscribe({next:t=>{this.cultivo=t,console.log("Datos del cultivo cargados:",t)},error:t=>{console.error("Error al cargar el cultivo:",t)}})}actualizarCultivo(){this.cultivoId?this.cultivoService.editarcultivo(this.cultivo,this.cultivoId).subscribe({next:t=>{this.is_ok=!0,this.is_error=!1,this.is_empty=!1,setTimeout(()=>{this.router.navigate(["dashboard/cultivo"])},2e3),console.log("Cultivo actualizada exitosamente:",t)},error:t=>{this.is_ok=!1,this.is_error=!0,this.is_empty=!1,console.error("Error al actualizar el cultivo:",t)}}):(this.is_ok=!1,this.is_error=!1,this.is_empty=!0,console.log("ID de cultivo no encontrado"))}goBack(){this.router.navigate(["dashboard/cultivo"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f),e.Y36(l.F0),e.Y36(l.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-actualizar-cultivo"]],decls:32,vars:8,consts:[[1,"container","mt-5"],[1,"card","shadow"],[1,"card-body"],[1,"card-title","text-center","mb-4"],[3,"ngSubmit"],["cultivoForm","ngForm"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","fecha_siembra",1,"form-label"],["type","date","id","fecha_siembra","name","fecha_siembra","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","fecha_cosecha_estimada",1,"form-label"],["type","date","id","fecha_cosecha_estimada","name","fecha_cosecha_estimada","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","id_finca",1,"form-label"],["type","text","id","id_finca","name","id_finca","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-3"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-warning"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Actualizar Cultivo"),e.qZA(),e.TgZ(5,"form",4,5),e.NdJ("ngSubmit",function(){return n.actualizarCultivo()}),e.TgZ(7,"div",6)(8,"label",7),e._uU(9,"Nombre"),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(a){return n.cultivo.nombre=a}),e.qZA()(),e.TgZ(11,"div",6)(12,"label",9),e._uU(13,"Fecha de Siembra"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(a){return n.cultivo.fecha_siembra=a}),e.qZA()(),e.TgZ(15,"div",6)(16,"label",11),e._uU(17,"Fecha de Cosecha Estimada"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(a){return n.cultivo.fecha_cosecha_estimada=a}),e.qZA()(),e.TgZ(19,"div",6)(20,"label",13),e._uU(21,"ID de Finca"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(a){return n.cultivo.id_finca=a}),e.qZA()(),e.TgZ(23,"div",15)(24,"button",16),e._uU(25,"Actualizar Cultivo"),e.qZA(),e.TgZ(26,"button",17),e.NdJ("click",function(){return n.goBack()}),e._uU(27,"Volver"),e.qZA()()()()(),e.TgZ(28,"div",18),e.YNc(29,Te,2,0,"div",19),e.YNc(30,Ae,2,0,"div",20),e.YNc(31,ye,2,0,"div",21),e.qZA()()),2&t){const r=e.MAs(6);e.xp6(10),e.Q6J("ngModel",n.cultivo.nombre),e.xp6(4),e.Q6J("ngModel",n.cultivo.fecha_siembra),e.xp6(4),e.Q6J("ngModel",n.cultivo.fecha_cosecha_estimada),e.xp6(4),e.Q6J("ngModel",n.cultivo.id_finca),e.xp6(2),e.Q6J("disabled",!r.form.valid),e.xp6(5),e.Q6J("ngIf",n.is_ok),e.xp6(1),e.Q6J("ngIf",n.is_error),e.xp6(1),e.Q6J("ngIf",n.is_empty)}},directives:[c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On,d.O5],styles:[""]}),o})();function Ue(o,i){1&o&&(e.TgZ(0,"div",17),e._uU(1," El sensor ha sido eliminado exitosamente. "),e.qZA())}function Fe(o,i){1&o&&(e.TgZ(0,"div",18),e._uU(1," No se puede eliminar el sensor porque tiene datos relacionados. "),e.qZA())}function xe(o,i){1&o&&(e.TgZ(0,"div",11),e._uU(1," No se ha encontrado el ID del sensor. "),e.qZA())}let ke=(()=>{class o{constructor(t,n,r){this.sensorService=t,this.router=n,this.route=r,this.is_ok=!1,this.is_error=!1,this.is_empty=!1,this.sensor={tipo:"",marca_modelo:"",fecha_instalacion:"",id_cultivo:""},this.sensorId=null}ngOnInit(){this.sensorId=this.route.snapshot.paramMap.get("id"),this.sensorId&&this.cargarSensor()}cargarSensor(){this.sensorId&&this.sensorService.obtenersensorId({id:this.sensorId}).subscribe({next:t=>{this.sensor=t,console.log("Datos del sensor cargados:",t)},error:t=>{console.error("Error al cargar el sensor:",t)}})}borrarSensor(){this.sensorId?this.sensorService.eliminarRegistrosensor(this.sensorId).subscribe({next:t=>{this.is_ok=!0,this.is_error=!1,this.is_empty=!1,setTimeout(()=>{this.router.navigate(["dashboard/sensor"])},2e3),console.log("Sensor eliminado exitosamente:",t)},error:t=>{this.is_ok=!1,this.is_error=!0,this.is_empty=!1,console.error("No se puede eliminar el sensor porque tiene datos relacionados:",t)}}):(this.is_ok=!1,this.is_error=!1,this.is_empty=!0,console.log("ID del sensor no encontrado"))}goBack(){this.router.navigate(["dashboard/sensor"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h),e.Y36(l.F0),e.Y36(l.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-borrar-sensor"]],decls:29,vars:7,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-8"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"card"],[1,"card-header","bg-danger","text-white"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["role","alert",1,"alert","alert-warning"],[1,"d-flex","justify-content-between"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-arrow-left"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Ue,2,0,"div",3),e.YNc(4,Fe,2,0,"div",4),e.YNc(5,xe,2,0,"div",5),e.TgZ(6,"div",6)(7,"div",7),e._uU(8," Confirmar eliminaci\xf3n "),e.qZA(),e.TgZ(9,"div",8)(10,"h5",9),e._uU(11),e.qZA(),e.TgZ(12,"p",10)(13,"strong"),e._uU(14,"Fecha de Instalaci\xf3n:"),e.qZA(),e._uU(15),e._UZ(16,"br"),e.TgZ(17,"strong"),e._uU(18,"ID de Cultivo:"),e.qZA(),e._uU(19),e.qZA(),e.TgZ(20,"div",11),e._uU(21," \xbfEst\xe1s seguro de que deseas eliminar este sensor? Esta acci\xf3n no se puede deshacer. "),e.qZA(),e.TgZ(22,"div",12)(23,"button",13),e.NdJ("click",function(){return n.borrarSensor()}),e._UZ(24,"i",14),e._uU(25," Eliminar "),e.qZA(),e.TgZ(26,"button",15),e.NdJ("click",function(){return n.goBack()}),e._UZ(27,"i",16),e._uU(28," Cancelar "),e.qZA()()()()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.is_ok),e.xp6(1),e.Q6J("ngIf",n.is_error),e.xp6(1),e.Q6J("ngIf",n.is_empty),e.xp6(6),e.AsE("",n.sensor.tipo," - ",n.sensor.marca_modelo,""),e.xp6(4),e.hij(" ",n.sensor.fecha_instalacion,""),e.xp6(4),e.hij(" ",n.sensor.id_cultivo," "))},directives:[d.O5],styles:[""]}),o})();function Ie(o,i){1&o&&(e.TgZ(0,"div",22),e._uU(1," Sensor actualizado exitosamente. Redirigiendo... "),e.qZA())}function Je(o,i){1&o&&(e.TgZ(0,"div",23),e._uU(1," Error al actualizar el sensor. Por favor, int\xe9ntelo de nuevo. "),e.qZA())}function Se(o,i){1&o&&(e.TgZ(0,"div",24),e._uU(1," Por favor, complete todos los campos requeridos. "),e.qZA())}const Ne=[{path:"",children:[{path:"finca",component:H,data:{title:"Finca"}},{path:"crear-finca",component:oe,data:{title:"Crear Finca"}},{path:"actualizar-finca/:id",component:ve,data:{title:"Actualizar Finca"}},{path:"borrar-finca/:id",component:Pe,data:{title:"Borrar Finca"}},{path:"cultivo",component:E,data:{title:"Cultivo"}},{path:"crear-cultivo",component:le,data:{title:"Crear cultivo"}},{path:"actualizar-cultivo/:id",component:qe,data:{title:"Actualizar cultivo"}},{path:"borrar-cultivo/:id",component:ge,data:{title:"Borrar cultivo"}},{path:"sensor",component:W,data:{title:"Sensor",expectedRole:"administrador"},canActivate:[A]},{path:"crear-sensor",component:pe,data:{title:"Crear Sensor",expectedRole:"administrador"},canActivate:[A]},{path:"actualizar-sensor/:id",component:(()=>{class o{constructor(t,n,r){this.sensorService=t,this.router=n,this.route=r,this.is_ok=!1,this.is_error=!1,this.is_empty=!1,this.sensor={tipo:"",marca_modelo:"",fecha_instalacion:"",id_cultivo:""},this.sensorId=null}ngOnInit(){this.sensorId=this.route.snapshot.paramMap.get("id"),this.sensorId&&this.cargarSensor()}cargarSensor(){this.sensorId&&this.sensorService.obtenersensorId({id:this.sensorId}).subscribe({next:t=>{this.sensor=t,console.log("Datos del sensor cargados:",t)},error:t=>{console.error("Error al cargar el sensor:",t)}})}actualizarSensor(){this.sensorId?this.sensorService.editarsensor(this.sensor,this.sensorId).subscribe({next:t=>{this.is_ok=!0,this.is_error=!1,this.is_empty=!1,setTimeout(()=>{this.router.navigate(["dashboard/sensor"])},2e3),console.log("sensor actualizada exitosamente:",t)},error:t=>{this.is_ok=!1,this.is_error=!0,this.is_empty=!1,console.error("Error al actualizar el sensor:",t)}}):(this.is_ok=!1,this.is_error=!1,this.is_empty=!0,console.log("ID del sensor no encontrado"))}goBack(){this.router.navigate(["dashboard/sensor"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h),e.Y36(l.F0),e.Y36(l.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-actualizar-sensor"]],decls:32,vars:8,consts:[[1,"container","mt-5"],[1,"card","shadow"],[1,"card-body"],[1,"card-title","text-center","mb-4"],[3,"ngSubmit"],["sensorForm","ngForm"],[1,"mb-3"],["for","tipo",1,"form-label"],["type","text","id","tipo","name","tipo","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","marca_modelo",1,"form-label"],["type","text","id","marca_modelo","name","marca_modelo","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","fecha_instalacion",1,"form-label"],["type","date","id","fecha_instalacion","name","fecha_instalacion","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","id_cultivo",1,"form-label"],["type","text","id","id_cultivo","name","id_cultivo","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-3"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-warning"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Actualizar Sensor"),e.qZA(),e.TgZ(5,"form",4,5),e.NdJ("ngSubmit",function(){return n.actualizarSensor()}),e.TgZ(7,"div",6)(8,"label",7),e._uU(9,"Tipo"),e.qZA(),e.TgZ(10,"input",8),e.NdJ("ngModelChange",function(a){return n.sensor.tipo=a}),e.qZA()(),e.TgZ(11,"div",6)(12,"label",9),e._uU(13,"Marca y Modelo"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(a){return n.sensor.marca_modelo=a}),e.qZA()(),e.TgZ(15,"div",6)(16,"label",11),e._uU(17,"Fecha de Instalaci\xf3n"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(a){return n.sensor.fecha_instalacion=a}),e.qZA()(),e.TgZ(19,"div",6)(20,"label",13),e._uU(21,"ID de Cultivo"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(a){return n.sensor.id_cultivo=a}),e.qZA()(),e.TgZ(23,"div",15)(24,"button",16),e._uU(25,"Actualizar Sensor"),e.qZA(),e.TgZ(26,"button",17),e.NdJ("click",function(){return n.goBack()}),e._uU(27,"Volver"),e.qZA()()()()(),e.TgZ(28,"div",18),e.YNc(29,Ie,2,0,"div",19),e.YNc(30,Je,2,0,"div",20),e.YNc(31,Se,2,0,"div",21),e.qZA()()),2&t){const r=e.MAs(6);e.xp6(10),e.Q6J("ngModel",n.sensor.tipo),e.xp6(4),e.Q6J("ngModel",n.sensor.marca_modelo),e.xp6(4),e.Q6J("ngModel",n.sensor.fecha_instalacion),e.xp6(4),e.Q6J("ngModel",n.sensor.id_cultivo),e.xp6(2),e.Q6J("disabled",!r.form.valid),e.xp6(5),e.Q6J("ngIf",n.is_ok),e.xp6(1),e.Q6J("ngIf",n.is_error),e.xp6(1),e.Q6J("ngIf",n.is_empty)}},directives:[c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On,d.O5],styles:[""]}),o})(),data:{title:"Actualizar sensor"}},{path:"borrar-sensor/:id",component:ke,data:{title:"Borrar sensor"}},{path:"default",component:y,data:{title:"Default"}},{path:"home",component:re.O,data:{title:"Home"}},{path:"monitoreo",component:U,data:{title:"Analytics"}}]}];let we=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[l.Bz.forChild(Ne)],l.Bz]}),o})();var Ee=u(4841);let ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,we,Ee.Xd,C.l,c.u5]]}),o})()}}]);